@model BookViewModel
@section Style{
    <link href="~/css/pagination.css" rel="stylesheet" />
}
<div class="container" style="margin-top: 35px;">
    <div class="row">

        <div class="col-lg-10 col-md-12 col-sm-12">

            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li id='previous-page' class="page-item-arrow">
                        <a class="page-link" href="javascript:void(0)" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>


                </ul>
            </nav>

            <div id="loop">
                @for (int i = 0; i < Model.Books.Count; i++)
                {
                    <div class="row">
                        @for (int j = 0; j < 3; j++)
                        {
                            i++;
                            @if (i < Model.Books.Count)
                            {
                                <div class="list-group col-lg-3">
                                    <div class="list-group-item active">
                                        <div class="content">
                                            <img src="@("~/img/" + Model.Books[i].Image)" asp-append-version="true" alt="Alternative Text">
                                            <div class="text">
                                                <p>
                                                    @Model.Books[i].Title <br>
                                                    @Model.Books[i].Price RSD
                                                </p>
                                            </div>
                                        </div>
                                        <div class="description">
                                            <div class="d-text">
                                                <button>Show more</button>
                                                <button>Wish list</button>
                                                <button class="btn" onclick="AddToCart(@Model.Books[i].BookId)">Add to cart</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="list-group col-lg-3">
                                </div>
                            }
                        }
                        @{i--;}
                    </div>
                }
            </div>



        </div>
        <div class="col-lg-2 col-md-12">
            <div id="myDropdown" class="dropdown-content">
                <select name="autors" id="autors" onchange="filterFunction()">
                    @foreach (var item in Model.Autors)
                    {
                        <option value="@item.FirstName.ToLower() @item.LastName.ToLower()">@item.FirstName @item.LastName</option>
                    }
                </select>
            </div>
        </div>

    </div>
</div>

@section JavaScript{
    <script src="~/js/Pagination.js"></script>
    <script>

        function filterFunction() {
            var removeTab = document.getElementById("main");
            removeTab.innerHTML = "";

             $.ajax({
                url: '@Url.ActionLink("SearchBooks", "Book")',
                data: { autor: $("#autors").val() },
                method: "get",
                 success: function () {

                },
                error: function () {
                    alert("Error!");
                }
            });
        }


        function AddToCart(id) {
            $.ajax({
                 url: '@Url.ActionLink("AddBookToCart", "Book")',
                data: { bookId: id },
                method: "post",
                success: function () {
                },
                error: function () {
                    alert("Error!");
                }
            });
        }


    </script>
}
